# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

services:
  http:
    RoomsService:
      auth: true
      base-path: /rooms
      endpoints:
        create:
          display-name: Create room
          method: POST  # TODO verify method
          path: /create/{appId}
          path-parameters:
            appId: commons.AppId
          request: 
            name: CreateRoomRequest
            query-parameters:
              region: commons.Region
          response: CreateRoomResponse
        connect:
          display-name: Connect room 
          method: POST  # TODO verify method
          path: /connect/{appId}/{roomId}
          path-parameters:
            appId: commons.AppId
            roomId: commons.RoomId
          response: ConnectToRoomResponse
        suspend:
          display-name: Suspend room
          method: DELETE  # TODO verify method
          path: /suspense/{appId}/{roomId}
          path-parameters:
            appId: commons.AppId
            roomId: commons.RoomId
          response: SuspendRoomResponse
        destroy:
          display-name: Delete room
          method: DELETE  # TODO verify method
          path: /destory/{appId}/{roomId}
          path-parameters:
            appId: commons.AppId
            roomId: commons.RoomId
          response: DestroyRoomResponse

types:
  CreateRoomResponse:
    properties:
      roomId: commons.RoomId
      host: string
      port: integer

  ConnectToRoomResponse:
    properties:
      host: string
      port: integer

  SuspendRoomResponse:
    properties:
      suspended: boolean

  DestroyRoomResponse:
    properties:
      destroyed: boolean